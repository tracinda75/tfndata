<!DOCTYPE html>
<html lang='es'>
<head>
<meta charset='UTF-8'/>
<meta name='viewport' content='width=device-width, initial-scale=1.0'/>
<title>Bolet√≠n Informativo - Trazabilidad Sentencias TFN-CNCAF-CSJN</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
:root{
  --base-font: 14px;
  --line-height: 1.4;
  --row-lines: 2;
  --cell-padding-y: 10px;
  --cell-padding-x: 10px;
}
body{
    font-family:'Inter','Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height:var(--line-height); color:#1f2937;
    background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height:100vh; padding:20px; font-size:var(--base-font);
}
.container{
    max-width:1400px; margin:0 auto; background:#fff;
    border-radius:14px; box-shadow:0 20px 40px rgba(31,41,55,.12); overflow:hidden;
}
.header{
    background:linear-gradient(135deg,#1f2937 0%,#374151 100%);
    color:#fff; padding:22px 28px; text-align:center;
}
.header h1{ font-size:24px; margin-bottom:6px; font-weight:500; letter-spacing:.2px; }
.header .subtitle{ font-size:14px; opacity:.9; font-weight:400; }

/* Tabs Navigation */
.tabs {
    display: flex;
    background: #f8fafc;
    border-bottom: 1px solid #e5e7eb;
}
.tab-button {
    padding: 15px 25px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #6b7280;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
}
.tab-button:hover {
    background: #f1f5f9;
    color: #374151;
}
.tab-button.active {
    color: #6366f1;
    border-bottom-color: #6366f1;
    background: white;
}

.tab-content {
    display: none;
    padding: 0;
}
.tab-content.active {
    display: block;
}

.loading{
    text-align:center; padding:40px; color:#6b7280;
    font-style:italic;
}

.error{
    background:#fef2f2; border:1px solid #fecaca; color:#dc2626;
    padding:15px; margin:20px; border-radius:8px; text-align:center;
}

.content{ padding:22px 24px; }
.section{ margin-bottom:36px; }
.section-title{
    font-size:16px; color:#111827; margin-bottom:14px;
    padding-bottom:8px; border-bottom:2px solid #6366f1; font-weight:600;
}

.table-container{ overflow-x:auto; border-radius:10px; border:1px solid #e5e7eb; }
.data-table{ width:100%; border-collapse:separate; border-spacing:0; background:#fff; table-layout:fixed; }
.data-table thead th{
    position:sticky; top:0; z-index:5;
    background:linear-gradient(135deg,#6366f1 0%,#7c3aed 100%);
    color:#fff; padding:10px var(--cell-padding-x); text-align:left; font-weight:600; font-size:12px;
    border-right:1px solid rgba(255,255,255,.15);
}
.data-table thead th:last-child{ border-right:none; }

.data-table td{
    padding: var(--cell-padding-y) var(--cell-padding-x);
    border-bottom:1px solid #f3f4f6; border-right:1px solid #f3f4f6;
    vertical-align:middle; font-size:13px; color:#374151; background:#fff;
    line-height: var(--line-height);
    height: calc(var(--line-height) * var(--row-lines) * 1em + var(--cell-padding-y) * 2);
}
.data-table td:last-child{ border-right:none; }

.cell-text{
  display:-webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: var(--row-lines);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:normal;
  word-break:break-word;
}

.align-left{ text-align:left; }
.align-center{ text-align:center; }
.align-right{ text-align:right; }

.data-table tr:nth-child(even) td{ background:#fafafa; }
.data-table tbody tr:hover td{ background:#f1f5ff; transition:background-color .2s ease; }

.btn-link{
  display:inline-block; padding:6px 10px; border-radius:8px;
  background:#eef2ff; border:1px solid #c7d2fe; color:#3730a3;
  font-weight:600; text-decoration:none; font-size:12px;
}
.btn-link:hover{ background:#e0e7ff; }

.muted{ color:#9ca3af; font-style:italic; }

.note{
    margin-top:16px; padding:12px 14px; background:#f8fafc;
    border-left:4px solid #6366f1; border-radius:8px; font-size:12.5px; color:#4b5563;
}
.small{ font-size:12px; color:#6b7280; margin-top:8px; }

.empty-table{
    text-align:center; padding:40px; color:#9ca3af; font-style:italic;
}

/* Chat Styles */
.chat-container {
    max-width: 100%;
    margin: 0 auto;
    background: #fff;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    height: 600px;
    display: flex;
    flex-direction: column;
}

.chat-header {
    background: linear-gradient(135deg, #6366f1 0%, #7c3aed 100%);
    color: white;
    padding: 20px;
    border-radius: 12px 12px 0 0;
}

.chat-header h3 {
    margin: 0 0 5px 0;
    font-size: 18px;
}

.chat-subtitle {
    opacity: 0.9;
    font-size: 13px;
}

.chat-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #fafafa;
}

.message {
    margin-bottom: 15px;
    display: flex;
}

.user-message {
    justify-content: flex-end;
}

.bot-message {
    justify-content: flex-start;
}

.message-content {
    max-width: 70%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
}

.user-message .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.bot-message .message-content {
    background: white;
    border: 1px solid #e5e7eb;
    color: #374151;
}

.chat-input-container {
    padding: 20px;
    border-top: 1px solid #e5e7eb;
    background: white;
}

.input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.chat-input {
    flex: 1;
    padding: 12px 16px;
    border: 1px solid #d1d5db;
    border-radius: 24px;
    font-size: 14px;
}

.send-button {
    background: linear-gradient(135deg, #6366f1 0%, #7c3aed 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 24px;
    cursor: pointer;
    font-weight: 600;
}

.chat-examples {
    text-align: center;
}

.example-tag {
    background: #f3f4f6;
    padding: 4px 8px;
    border-radius: 12px;
    margin: 0 5px;
    font-size: 11px;
    color: #6b7280;
}
</style>

</head>
<body>
<div class='container'>
<div class='header'>
<h1>Bolet√≠n Informativo</h1>
<div class='subtitle'>Trazabilidad de Sentencias TFN ‚Äî CNCAF ‚Äî CSJN</div>
</div>

<!-- Tabs Navigation -->
<div class="tabs">
    <button class="tab-button active" onclick="mostrarTab('datos-tab')">üìä Datos del Bolet√≠n</button>
    <button class="tab-button" onclick="mostrarTab('chat-tab')">üí¨ Chat Jurisprudencial</button>
    <button class="tab-button" onclick="mostrarTab('admin-tab')">‚öôÔ∏è Administraci√≥n</button>
</div>

<!-- Tab 1: Datos del Bolet√≠n -->
<div id='datos-tab' class='tab-content active'>
    <div id='loading' class='loading'>
        Cargando datos del bolet√≠n...
    </div>

    <div id='error' class='error' style='display:none;'></div>

    <div id='content' class='content' style='display:none;'>

    <div class='section'>
    <h2 class='section-title'>TFN (Sentencias Nuevas)</h2>
    <div class='table-container'>
    <table class='data-table'>
    <thead>
    <tr>
    <th class='align-left'>Car√°tula TFN</th>
    <th class='align-left'>Expediente TFN</th>
    <th class='align-left'>Competencia TFN</th>
    <th class='align-center'>Sala TFN</th>
    <th class='align-center'>Vocal√≠a TFN</th>
    <th class='align-left'>Resuelve TFN</th>
    <th class='align-left'>Tema TFN</th>
    </tr>
    </thead>
    <tbody id='tbody-tfn'>
    </tbody>
    </table>
    </div>
    <div class='small'>Filas: <span id='count-tfn'>0</span> ‚Äî Consejo: pasa el mouse para ver el tooltip con el texto completo.</div>
    </div>

    <div class='section'>
    <h2 class='section-title'>Trazabilidad TFN ‚Äî CNCAF</h2>
    <div class='table-container'>
    <table class='data-table'>
    <thead>
    <tr>
    <th class='align-left'>Expediente TFN</th>
    <th class='align-left'>Competencia TFN</th>
    <th class='align-center'>Sala TFN</th>
    <th class='align-center'>Vocal√≠a TFN</th>
    <th class='align-left'>Resuelve TFN</th>
    <th class='align-left'>Tema TFN</th>
    <th class='align-left'>Car√°tula CNCAF</th>
    <th class='align-center'>Fecha CNCAF</th>
    <th class='align-center'>Sala CNCAF</th>
    <th class='align-left'>Expediente CNCAF</th>
    <th class='align-left'>Descarga CNCAF</th>
    <th class='align-left'>Resuelve CNCAF</th>
    </tr>
    </thead>
    <tbody id='tbody-cncaf'>
    </tbody>
    </table>
    </div>
    <div class='small'>Filas: <span id='count-cncaf'>0</span> ‚Äî Consejo: pasa el mouse para ver el tooltip con el texto completo.</div>
    </div>

    <div class='section'>
    <h2 class='section-title'>Trazabilidad TFN ‚Äî CNCAF ‚Äî CSJN</h2>
    <div class='table-container'>
    <table class='data-table'>
    <thead>
    <tr>
    <th class='align-left'>Car√°tula CSJN</th>
    <th class='align-center'>Fecha CSJN</th>
    <th class='align-left'>Resuelve CSJN</th>
    <th class='align-left'>M√°s Info CSJN</th>
    <th class='align-center'>Votos CSJN</th>
    <th class='align-left'>Descarga CSJN</th>
    <th class='align-left'>Expediente CNCAF</th>
    <th class='align-left'>Expediente TFN</th>
    </tr>
    </thead>
    <tbody id='tbody-csjn'>
    </tbody>
    </table>
    </div>
    <div class='small'>Filas: <span id='count-csjn'>0</span> ‚Äî Consejo: pasa el mouse para ver el tooltip con el texto completo.</div>
    </div>

    <div class='note'>
    <strong>Nota:</strong> Para normalizar visualmente, se trunc√≥ el texto a 2 l√≠neas por celda con tooltip al pasar el mouse. 
    Los datos se actualizan diariamente con informaci√≥n del d√≠a anterior.
    <div style='margin-top:8px;'>
    <strong>√öltima actualizaci√≥n:</strong> <span id='fecha-actualizacion'>--</span>
    </div>
    </div>

    </div>
</div>

<!-- Tab 2: Chat Jurisprudencial -->
<div id='chat-tab' class='tab-content'>
    <div class="chat-container">
        <!-- Header del Chat -->
        <div class="chat-header">
            <h3>üí¨ Asistente Jurisprudencial</h3>
            <div class="chat-subtitle">Consulta sentencias usando lenguaje natural</div>
        </div>

        <!-- √Årea de Conversaci√≥n -->
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="message-content">
                    ¬°Hola! Soy tu asistente para consultar jurisprudencia del tribunal. 
                    Puedes preguntarme sobre sentencias, materias, montos o cualquier tema legal.
                    <br><br>
                    <em>Nota: Esta funcionalidad se conectar√° pr√≥ximamente con el motor de b√∫squeda inteligente.</em>
                </div>
            </div>
        </div>

        <!-- Input de Mensaje -->
        <div class="chat-input-container">
            <div class="input-group">
                <input type="text" id="chatInput" 
                       placeholder="Ej: 'Buscar sentencias sobre exportaciones en 2023'"
                       class="chat-input">
                <button id="sendButton" class="send-button">Enviar</button>
            </div>
            <div class="chat-examples">
                <small>Ejemplos: 
                    <span class="example-tag">"fallos de aduana mayores a $1M"</span>
                    <span class="example-tag">"jurisprudencia reciente sobre IVA"</span>
                    <span class="example-tag">"sentencias de la sala 3"</span>
                </small>
            </div>
        </div>
    </div>
</div>

<!-- Tab 3: Administraci√≥n -->
<div id='admin-tab' class='tab-content'>
    <div class="content">
        <div class="section">
            <h2 class="section-title">Panel de Administraci√≥n</h2>
            <div style="text-align: center; padding: 40px;">
                <h3>‚öôÔ∏è Funciones de Administraci√≥n</h3>
                <p>Acceso para la gesti√≥n del sistema y actualizaci√≥n de datos.</p>
                <div style="margin: 30px 0;">
                    <a href="https://tracinda-boletin.onrender.com/admin" target="_blank" class="btn-link" style="padding: 12px 24px; font-size: 16px;">
                        üîß Ir al Panel de Administraci√≥n Completo
                    </a>
                </div>
                <div class="note">
                    <strong>URL del API:</strong><br>
                    <code>https://tracinda-boletin.onrender.com/api/datos</code><br><br>
                    <strong>Estado del sistema:</strong> 
                    <span id="system-status">Verificando...</span>
                </div>
            </div>
        </div>
    </div>
</div>

</div>
</div>

<script>
// CORREGIDO: URL de tu backend en Render
const BACKEND_URL = 'https://tracinda-boletin.onrender.com';

// Sistema de tabs
function mostrarTab(tabId) {
    // Ocultar todos los tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Mostrar tab seleccionado
    document.getElementById(tabId).classList.add('active');
    
    // Actualizar botones activos
    document.querySelectorAll('.tab-button').forEach(button => {
        button.classList.remove('active');
    });
    event.currentTarget.classList.add('active');
    
    // Inicializar chat si es la pesta√±a correspondiente
    if (tabId === 'chat-tab') {
        inicializarChat();
    }
    
    // Verificar estado del sistema si es admin tab
    if (tabId === 'admin-tab') {
        verificarEstadoSistema();
    }
}

// Verificar estado del sistema
async function verificarEstadoSistema() {
    try {
        const response = await fetch(`${BACKEND_URL}/api/test`);
        if (response.ok) {
            const data = await response.json();
            document.getElementById('system-status').innerHTML = 
                `<span style="color: green;">‚úÖ Conectado - ${data.timestamp}</span>`;
        }
    } catch (error) {
        document.getElementById('system-status').innerHTML = 
            `<span style="color: red;">‚ùå Error de conexi√≥n</span>`;
    }
}

// Cargar datos al cargar la p√°gina
document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ P√°gina cargada correctamente');
    cargarDatos();
});

async function cargarDatos() {
    console.log('üîç Iniciando carga de datos...');
    
    try {
        const response = await fetch(`${BACKEND_URL}/api/datos`);
        console.log('üì° Status de respuesta:', response.status);
        
        if (response.ok) {
            const data = await response.json();
            console.log('‚úÖ Datos recibidos correctamente');
            mostrarDatos(data);
        } else {
            throw new Error(`Error HTTP: ${response.status}`);
        }
    } catch (error) {
        console.error('‚ùå Error:', error);
        mostrarError('Error cargando datos: ' + error.message);
    }
}

function mostrarDatos(data) {
    console.log('üìä Mostrando datos en interfaz');
    
    // Ocultar loading y error
    document.getElementById('loading').style.display = 'none';
    document.getElementById('error').style.display = 'none';
    document.getElementById('content').style.display = 'block';
    
    // Llenar tablas
    llenarTablaTFN(data.tfn || []);
    llenarTablaCNCAF(data.tfn_cncaf || []);
    llenarTablaCSJN(data.tfn_cncaf_csjn || []);
    
    // Mostrar fecha de actualizaci√≥n
    document.getElementById('fecha-actualizacion').textContent = data.fecha_actualizacion || '--';
    
    console.log('‚úÖ Interfaz actualizada correctamente');
}

function mostrarError(mensaje) {
    console.error('‚ùå Mostrando error:', mensaje);
    document.getElementById('loading').style.display = 'none';
    document.getElementById('error').style.display = 'block';
    document.getElementById('error').textContent = mensaje;
    document.getElementById('content').style.display = 'none';
}

function llenarTablaTFN(datos) {
    const tbody = document.getElementById('tbody-tfn');
    tbody.innerHTML = '';
    
    if (datos.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" class="empty-table">No hay datos disponibles</td></tr>';
        document.getElementById('count-tfn').textContent = '0';
        return;
    }
    
    datos.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Caratula_TFN || '')}'>${truncarTexto(item.Caratula_TFN || '')}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Expediente_TFN || '')}'>${item.Expediente_TFN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Competencia_TFN || '')}'>${item.Competencia_TFN || ''}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Sala_TFN || '')}'>${item.Sala_TFN || ''}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Vocalia_TFN || '')}'>${item.Vocalia_TFN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Resuelve_TFN || '')}'>${truncarTexto(item.Resuelve_TFN || '')}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Tema_TFN || '')}'>${item.Tema_TFN || ''}</span></td>
        `;
        tbody.appendChild(row);
    });
    
    document.getElementById('count-tfn').textContent = datos.length;
}

function llenarTablaCNCAF(datos) {
    const tbody = document.getElementById('tbody-cncaf');
    tbody.innerHTML = '';
    
    if (datos.length === 0) {
        tbody.innerHTML = '<tr><td colspan="12" class="empty-table">No hay datos disponibles</td></tr>';
        document.getElementById('count-cncaf').textContent = '0';
        return;
    }
    
    datos.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Expediente_TFN || '')}'>${item.Expediente_TFN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Competencia_TFN || '')}'>${item.Competencia_TFN || ''}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Sala_TFN || '')}'>${item.Sala_TFN || ''}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Vocalia_TFN || '')}'>${item.Vocalia_TFN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Resuelve_TFN || '')}'>${truncarTexto(item.Resuelve_TFN || '')}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Tema_TFN || '')}'>${item.Tema_TFN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Caratula_CNCAF || '')}'>${truncarTexto(item.Caratula_CNCAF || '')}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Fecha_CNCAF || '')}'>${formatearFecha(item.Fecha_CNCAF || '')}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Sala_CNCAF || '')}'>${item.Sala_CNCAF || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Expediente_CNCAF || '')}'>${item.Expediente_CNCAF || ''}</span></td>
            <td class='align-left'>${crearEnlace(item.Descarga_CNCAF)}</td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Resuelve_CNCAF || '')}'>${truncarTexto(item.Resuelve_CNCAF || '')}</span></td>
        `;
        tbody.appendChild(row);
    });
    
    document.getElementById('count-cncaf').textContent = datos.length;
}

function llenarTablaCSJN(datos) {
    const tbody = document.getElementById('tbody-csjn');
    tbody.innerHTML = '';
    
    if (datos.length === 0) {
        tbody.innerHTML = '<tr><td colspan="8" class="empty-table">No hay datos disponibles</td></tr>';
        document.getElementById('count-csjn').textContent = '0';
        return;
    }
    
    datos.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Caratula_CSJN || '')}'>${truncarTexto(item.Caratula_CSJN || '')}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Fecha_CSJN || '')}'>${formatearFecha(item.Fecha_CSJN || '')}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Resuelve_CSJN || '')}'>${item.Resuelve_CSJN || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.MasInfo_CSJN || '')}'>${truncarTexto(item.MasInfo_CSJN || '')}</span></td>
            <td class='align-center'><span class='cell-text' title='${escapeHtml(item.Votos_CSJN || '')}'>${truncarTexto(item.Votos_CSJN || '')}</span></td>
            <td class='align-left'>${crearEnlace(item.Descarga_CSJN)}</td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Expediente_CNCAF || '')}'>${item.Expediente_CNCAF || ''}</span></td>
            <td class='align-left'><span class='cell-text' title='${escapeHtml(item.Expediente_TFN || '')}'>${item.Expediente_TFN || ''}</span></td>
        `;
        tbody.appendChild(row);
    });
    
    document.getElementById('count-csjn').textContent = datos.length;
}

// Sistema de Chat
function inicializarChat() {
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendButton');
    const chatMessages = document.getElementById('chatMessages');

    function agregarMensaje(texto, esUsuario = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${esUsuario ? 'user-message' : 'bot-message'}`;
        
        messageDiv.innerHTML = `
            <div class="message-content">
                ${texto}
            </div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function enviarMensaje() {
        const texto = chatInput.value.trim();
        if (!texto) return;

        // Mensaje del usuario
        agregarMensaje(texto, true);
        chatInput.value = '';

        // Simular respuesta del bot
        agregarMensaje("üîç Procesando tu consulta...", false);
        
        // Simular delay de respuesta
        setTimeout(() => {
            const respuestas = [
                "He encontrado 3 sentencias relevantes sobre tu consulta. Esta funcionalidad se conectar√° pr√≥ximamente con el motor de b√∫squeda inteligente.",
                "La b√∫squeda sem√°ntica est√° en desarrollo. Pronto podr√© analizar jurisprudencia de manera m√°s precisa.",
                "Interesante consulta. El sistema RAG (Retrieval-Augmented Generation) se implementar√° en la siguiente fase.",
                "Actualmente estoy en modo demostraci√≥n. La integraci√≥n con IA jur√≠dica est√° planificada para el pr√≥ximo release."
            ];
            agregarMensaje(respuestas[Math.floor(Math.random() * respuestas.length)], false);
        }, 1500);
    }

    // Event listeners
    sendButton.addEventListener('click', enviarMensaje);
    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') enviarMensaje();
    });

    // Cargar ejemplo aleatorio
    const ejemplos = [
        "Sentencias sobre exportaciones 2023",
        "Fallos de la sala 3 con montos mayores a 1 mill√≥n",
        "Jurisprudencia reciente sobre percepciones IVA",
        "Expedientes con apelaciones concedidas"
    ];
    chatInput.placeholder = `Ej: "${ejemplos[Math.floor(Math.random() * ejemplos.length)]}"`;
}

// Funciones auxiliares
function escapeHtml(texto) {
    if (!texto) return '';
    return texto.toString()
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
}

function truncarTexto(texto, limite = 100) {
    if (!texto) return '';
    return texto.length > limite ? texto.substring(0, limite) + '...' : texto;
}

function formatearFecha(fecha) {
    if (!fecha) return '';
    try {
        return new Date(fecha).toLocaleDateString('es-AR');
    } catch {
        return fecha;
    }
}

function crearEnlace(url) {
    if (!url) return '';
    return `<a class="btn-link" href="${url}" target="_blank" rel="noopener">Ver</a>`;
}
</script>

</body>
</html>
